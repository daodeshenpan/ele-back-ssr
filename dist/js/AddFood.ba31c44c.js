(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{514:function(e,t,a){},523:function(e,t,a){"use strict";var r=a(514);a.n(r).a},528:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-food"},[a("p",{staticClass:"form-header"},[e._v("选择食品种类")]),e._v(" "),a("el-form",{ref:"categoryForm",staticClass:"form",attrs:{model:e.categoryForm,rules:e.categoryFormRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"食品种类"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.form.category_id,callback:function(t){e.$set(e.form,"category_id",t)},expression:"form.category_id"}},e._l(e.categoryList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAddCategory,expression:"showAddCategory"}],staticClass:"add_category"},[a("el-form-item",{attrs:{label:"食品种类",prop:"name"}},[a("el-input",{model:{value:e.categoryForm.name,callback:function(t){e.$set(e.categoryForm,"name",t)},expression:"categoryForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"种类描述",prop:"description"}},[a("el-input",{model:{value:e.categoryForm.description,callback:function(t){e.$set(e.categoryForm,"description",t)},expression:"categoryForm.description"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onCategorySubmit}},[e._v("提交")])],1)],1)]),e._v(" "),a("div",{staticClass:"add_category_button",on:{click:function(t){e.showAddCategory=!e.showAddCategory}}},[e.showAddCategory?a("i",{staticClass:"el-icon-caret-top edit_icon"}):a("i",{staticClass:"el-icon-caret-bottom edit_icon",attrs:{slot:"icon"},slot:"icon"}),e._v(" "),a("span",[e._v("添加食品种类")])])],1),e._v(" "),a("p",{staticClass:"form-header"},[e._v("添加食品")]),e._v(" "),a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"食品名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"食品活动"}},[a("el-input",{model:{value:e.form.activity,callback:function(t){e.$set(e.form,"activity",t)},expression:"form.activity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"食品描述"}},[a("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"食品图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.baseURL+"/v1/addimg/food","show-file-list":!1,"on-success":e.handleSuccess}},[e.form.image_path?a("img",{staticClass:"avatar",attrs:{src:e.imgBaseURL+e.form.image_path}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"食品特色"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.attributes,callback:function(t){e.$set(e.form,"attributes",t)},expression:"form.attributes"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"包装费"}},[a("el-input-number",{attrs:{min:0},model:{value:e.form.specs[0].packing_fee,callback:function(t){e.$set(e.form.specs[0],"packing_fee",t)},expression:"form.specs[0].packing_fee"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格"}},[a("el-input-number",{attrs:{min:0},model:{value:e.form.specs[0].price,callback:function(t){e.$set(e.form.specs[0],"price",t)},expression:"form.specs[0].price"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)};r._withStripped=!0;a(253);var s,o=a(98),i=a.n(o),n=(a(252),a(153)),c=a.n(n),l=a(1),m=a(62),u={name:"AddGoods",data:function(){return{form:{name:"",activity:"",restaurant_id:"",category_id:"",description:"",image_path:"",specs:[{specs:"默认",packing_fee:0,price:20}],attributes:[]},categoryForm:{name:"",description:"",restaurant_id:""},categoryFormRules:{name:[{required:!0,message:"请输入食品种类",trigger:"blur"}],description:[{required:!0,message:"请选择种类描述",trigger:"blur"}]},rules:{name:[{required:!0,message:"请输入食品名称",trigger:"blur"}]},showAddCategory:!1,categoryList:[],options:[{value:"招牌",label:"招牌"},{value:"新品",label:"新品"}],baseURL:m.a,imgBaseURL:m.b}},mounted:(s=c()(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$route.query.restaurant_id){e.next=9;break}return this.form.restaurant_id=this.$route.query.restaurant_id,this.categoryForm.restaurant_id=this.$route.query.restaurant_id,e.next=5,Object(l.m)(this.form.restaurant_id);case 5:t=e.sent,this.categoryList=t.data.category_list,e.next=10;break;case 9:this.$confirm("添加食品需要先选择店铺，是否现在去选择？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){a.$router.push("/shopList")})).catch((function(){}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),methods:{onCategorySubmit:function(){var e=this;this.form.restaurant_id?this.$refs.categoryForm.validate(function(){var t=c()(i.a.mark((function t(a){var r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=18;break}return t.next=3,Object(l.b)(e.categoryForm);case 3:if(1!==(r=t.sent).data.status){t.next=15;break}return e.$message.success(r.data.success),e.categoryForm.name="",e.categoryForm.description="",e.showAddCategory=!1,t.next=11,Object(l.m)(e.form.restaurant_id);case 11:s=t.sent,e.categoryList=s.data.category_list,t.next=16;break;case 15:e.$message.error(r.data.message);case 16:t.next=18;break;case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.$confirm("你还没有选择店铺，是否现在去选择？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){e.$router.push("/shopList")})).catch((function(){}))},handleSuccess:function(e){1===e.status?this.form.image_path=e.image_path:this.$message({type:"error",message:e.message})},onSubmit:function(){var e=this;this.form.restaurant_id?this.$refs.form.validate((function(t){t&&Object(l.a)(e.form).then((function(t){1===t.data.status?(e.$message.success(t.data.success),e.form={name:"",activity:"",restaurant_id:"",category_id:"",description:"",image_path:"",specs:[{specs:"默认",packing_fee:0,price:20}],attributes:[]},e.form.restaurant_id=e.$route.query.restaurant_id):e.$message.error(t.data.message)})).catch((function(){}))})):this.$confirm("你还没有选择店铺，是否现在去选择？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){e.$router.push("/shopList")})).catch((function(){}))}}},f=(a(523),a(16)),d=Object(f.a)(u,r,[],!1,null,null,null);d.options.__file="src/views/AddFood.vue";t.default=d.exports}}]);